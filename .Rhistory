# Test the function
input <- "data/gc_data/13MAR23FID_TC_16.RES"
result <- extract_date(input)
# Chunk 4
gc_data <- bind_rows(gc_data0, gc_data1, gc_data2) |>
mutate(
sampling_date = dmy(extract_date(file_name)),
start_date = dmy("07FEB23"),
dt = sampling_date - start_date
)
t0 <- tibble(
well = c("BA3A", "BA4A", "BA1B")
) |>
crossing(
depth = c(20, 150, 270),
amendment = c("Bicarbonate", "Formate", "Acetate"),
gas = c("CH4", "CO2")
) |>
mutate(
depth = case_when(
depth == 270 & well == "BA1B" ~ 250,
TRUE ~ depth
)
) |>
mutate(
nmol_per_ml = 0,
start_date = dmy("07FEB23"),
sampling_date = dmy("07FEB23"),
dt = sampling_date - start_date
)
gc_data <- gc_data |>
bind_rows(t0)
gc_data_filtered |>
filter(!file_name %in% excluded)
gc_data_filtered <- gc_data |>
filter(!file_name %in% excluded)
gc_data_filtered <- gc_data |>
filter(!file_name %in% excluded$excluded)
excluded
excluded_list <- excluded$excluded
gc_data_filtered <- gc_data |>
filter(!file_name %in% excluded_list)
View(gc_data)
t0 <- tibble(
well = c("BA3A", "BA4A", "BA1B")
) |>
crossing(
depth = c(20, 150, 270),
amendment = c("Bicarbonate", "Formate", "Acetate"),
gas = c("CH4", "CO2")
) |>
mutate(
depth = case_when(
depth == 270 & well == "BA1B" ~ 250,
TRUE ~ depth
)
) |>
mutate(
nmol_per_ml = 0,
start_date = dmy("07FEB23"),
sampling_date = dmy("07FEB23"),
dt = sampling_date - start_date
)
gc_data <- gc_data |>
bind_rows(t0)
excluded_list <- excluded$excluded
gc_data_filtered <- gc_data |>
filter(!file_name %in% excluded_list)
amendment_palette <- c("#9c0000", "#004e9c", "#003b09")
gc_data |>
filter(gas == "CH4") |>
ggplot(
aes(x = dt,
y = nmol_per_ml,
color = amendment,
shape = amendment,
linetype = amendment,
label = file_name
)
) +
geom_point() +
geom_line() +
facet_wrap(vars(well, depth), scales = "free_y") +
scale_color_manual(values = amendment_palette) +
#scale_x_continuous(breaks = c(0, 30, 60, 120, 180)) +
theme_bw() +
labs(
x = "Incubation time (days)",
y = latex2exp::TeX("nmol $CH_4$ $ml^{-1}$")
) +
theme(
strip.background = element_rect(fill = "#e3e3e3", color = NA),
panel.grid.minor = element_blank(),
panel.grid.major.y = element_blank(),
strip.background.x = element_rect(fill = "black"),
strip.text = element_text(color = "white"),
panel.border = element_rect(linewidth = 1.2, color = "black"),
axis.ticks.x = element_blank(),
#legend.position = "None"
)
plotly::ggplotly()
amendment_palette <- c("#9c0000", "#004e9c", "#003b09")
gc_data |>
filter(gas == "CH4") |>
ggplot(
aes(x = dt,
y = nmol_per_ml,
color = amendment,
shape = amendment,
linetype = amendment,
label = file_name
)
) +
geom_point() +
geom_line() +
facet_wrap(vars(well, depth), scales = "free_y") +
scale_color_manual(values = amendment_palette) +
#scale_x_continuous(breaks = c(0, 30, 60, 120, 180)) +
theme_bw() +
labs(
x = "Incubation time (days)",
y = latex2exp::TeX("nmol $CH_4$ $ml^{-1}$")
) +
theme(
strip.background = element_rect(fill = "#e3e3e3", color = NA),
panel.grid.minor = element_blank(),
panel.grid.major.y = element_blank(),
strip.background.x = element_rect(fill = "black"),
strip.text = element_text(color = "white"),
panel.border = element_rect(linewidth = 1.2, color = "black"),
axis.ticks.x = element_blank(),
#legend.position = "None"
)
#plotly::ggplotly()
View(excluded)
library(tidyverse)
library(lubridate)
gc_data0 <- readRDS("cache/gc_samples0.RDS")
gc_data1 <- readRDS("cache/gc_samples1.RDS")
gc_data2 <- readRDS("cache/gc_samples2.RDS")
excluded <- readxl::read_excel("data/gc_data/excluded_gc_data.xlsx")
library(tidyverse)
library(lubridate)
gc_data0 <- readRDS("cache/gc_samples0.RDS")
gc_data1 <- readRDS("cache/gc_samples1.RDS")
gc_data2 <- readRDS("cache/gc_samples2.RDS")
excluded <- readxl::read_excel("data/gc_data/excluded_gc_data.xlsx")
extract_date <- function(input_string) {
# Define the regular expression pattern to match the date format
date_pattern <- "\\d{2}[A-Z]{3}\\d{2}"
# Use str_extract to find the first occurrence of the pattern in the input string
extracted_date <- str_extract(input_string, date_pattern)
return(extracted_date)
}
# Test the function
input <- "data/gc_data/13MAR23FID_TC_16.RES"
result <- extract_date(input)
gc_data <- bind_rows(gc_data0, gc_data1, gc_data2) |>
mutate(
sampling_date = dmy(extract_date(file_name)),
start_date = dmy("07FEB23"),
dt = sampling_date - start_date
)
t0 <- tibble(
well = c("BA3A", "BA4A", "BA1B")
) |>
crossing(
depth = c(20, 150, 270),
amendment = c("Bicarbonate", "Formate", "Acetate"),
gas = c("CH4", "CO2")
) |>
mutate(
depth = case_when(
depth == 270 & well == "BA1B" ~ 250,
TRUE ~ depth
)
) |>
mutate(
nmol_per_ml = 0,
start_date = dmy("07FEB23"),
sampling_date = dmy("07FEB23"),
dt = sampling_date - start_date
)
gc_data <- gc_data |>
bind_rows(t0)
excluded_list <- excluded$excluded
gc_data_filtered <- gc_data |>
filter(!file_name %in% excluded_list)
amendment_palette <- c("#9c0000", "#004e9c", "#003b09")
gc_data |>
filter(gas == "CH4") |>
ggplot(
aes(x = dt,
y = nmol_per_ml,
color = amendment,
shape = amendment,
linetype = amendment,
label = file_name
)
) +
geom_point() +
geom_line() +
facet_wrap(vars(well, depth), scales = "free_y") +
scale_color_manual(values = amendment_palette) +
#scale_x_continuous(breaks = c(0, 30, 60, 120, 180)) +
theme_bw() +
labs(
x = "Incubation time (days)",
y = latex2exp::TeX("nmol $CH_4$ $ml^{-1}$")
) +
theme(
strip.background = element_rect(fill = "#e3e3e3", color = NA),
panel.grid.minor = element_blank(),
panel.grid.major.y = element_blank(),
strip.background.x = element_rect(fill = "black"),
strip.text = element_text(color = "white"),
panel.border = element_rect(linewidth = 1.2, color = "black"),
axis.ticks.x = element_blank(),
#legend.position = "None"
)
#plotly::ggplotly()
gc_data_filtered |>
filter(gas == "CH4") |>
ggplot(
aes(x = dt,
y = nmol_per_ml,
color = amendment,
shape = amendment,
linetype = amendment,
label = file_name
)
) +
geom_point() +
geom_line() +
facet_wrap(vars(well, depth), scales = "free_y") +
scale_color_manual(values = amendment_palette) +
#scale_x_continuous(breaks = c(0, 30, 60, 120, 180)) +
theme_bw() +
labs(
x = "Incubation time (days)",
y = latex2exp::TeX("nmol $CH_4$ $ml^{-1}$")
) +
theme(
strip.background = element_rect(fill = "#e3e3e3", color = NA),
panel.grid.minor = element_blank(),
panel.grid.major.y = element_blank(),
strip.background.x = element_rect(fill = "black"),
strip.text = element_text(color = "white"),
panel.border = element_rect(linewidth = 1.2, color = "black"),
axis.ticks.x = element_blank(),
#legend.position = "None"
)
plotly::ggplotly()
# Chunk 1
library(tidyverse)
library(lubridate)
# Chunk 2
gc_data0 <- readRDS("cache/gc_samples0.RDS")
gc_data1 <- readRDS("cache/gc_samples1.RDS")
gc_data2 <- readRDS("cache/gc_samples2.RDS")
excluded <- readxl::read_excel("data/gc_data/excluded_gc_data.xlsx")
# Chunk 3
extract_date <- function(input_string) {
# Define the regular expression pattern to match the date format
date_pattern <- "\\d{2}[A-Z]{3}\\d{2}"
# Use str_extract to find the first occurrence of the pattern in the input string
extracted_date <- str_extract(input_string, date_pattern)
return(extracted_date)
}
# Test the function
input <- "data/gc_data/13MAR23FID_TC_16.RES"
result <- extract_date(input)
# Chunk 4
gc_data <- bind_rows(gc_data0, gc_data1, gc_data2) |>
mutate(
sampling_date = dmy(extract_date(file_name)),
start_date = dmy("07FEB23"),
dt = sampling_date - start_date
)
# Chunk 5
t0 <- tibble(
well = c("BA3A", "BA4A", "BA1B")
) |>
crossing(
depth = c(20, 150, 270),
amendment = c("Bicarbonate", "Formate", "Acetate"),
gas = c("CH4", "CO2")
) |>
mutate(
depth = case_when(
depth == 270 & well == "BA1B" ~ 250,
TRUE ~ depth
)
) |>
mutate(
nmol_per_ml = 0,
start_date = dmy("07FEB23"),
sampling_date = dmy("07FEB23"),
dt = sampling_date - start_date
)
gc_data <- gc_data |>
bind_rows(t0)
excluded_list <- excluded$excluded
gc_data_filtered <- gc_data |>
filter(!file_name %in% excluded_list)
amendment_palette <- c("#9c0000", "#004e9c", "#003b09")
gc_data_filtered |>
filter(gas == "CH4") |>
ggplot(
aes(x = dt,
y = nmol_per_ml,
color = amendment,
shape = amendment,
linetype = amendment,
label = file_name
)
) +
geom_point() +
geom_line() +
facet_wrap(vars(well, depth), scales = "free_y") +
scale_color_manual(values = amendment_palette) +
#scale_x_continuous(breaks = c(0, 30, 60, 120, 180)) +
theme_bw() +
labs(
x = "Incubation time (days)",
y = latex2exp::TeX("nmol $CH_4$ $ml^{-1}$")
) +
theme(
strip.background = element_rect(fill = "#e3e3e3", color = NA),
panel.grid.minor = element_blank(),
panel.grid.major.y = element_blank(),
strip.background.x = element_rect(fill = "black"),
strip.text = element_text(color = "white"),
panel.border = element_rect(linewidth = 1.2, color = "black"),
axis.ticks.x = element_blank(),
#legend.position = "None"
)
plotly::ggplotly()
View(gc_data)
amendment_palette <- c("#9c0000", "#004e9c", "#003b09")
gc_data_filtered |>
filter(gas == "CH4") |>
ggplot(
aes(x = dt,
y = peak_area,
color = amendment,
shape = amendment,
linetype = amendment,
label = file_name
)
) +
geom_point() +
geom_line() +
facet_wrap(vars(well, depth), scales = "free_y") +
scale_color_manual(values = amendment_palette) +
#scale_x_continuous(breaks = c(0, 30, 60, 120, 180)) +
theme_bw() +
labs(
x = "Incubation time (days)",
y = latex2exp::TeX("nmol $CH_4$ $ml^{-1}$")
) +
theme(
strip.background = element_rect(fill = "#e3e3e3", color = NA),
panel.grid.minor = element_blank(),
panel.grid.major.y = element_blank(),
strip.background.x = element_rect(fill = "black"),
strip.text = element_text(color = "white"),
panel.border = element_rect(linewidth = 1.2, color = "black"),
axis.ticks.x = element_blank(),
#legend.position = "None"
)
#plotly::ggplotly()
amendment_palette <- c("#9c0000", "#004e9c", "#003b09")
gc_data_filtered |>
filter(gas == "CH4") |>
ggplot(
aes(x = dt,
y = nmol_per_ml,
color = amendment,
shape = amendment,
linetype = amendment,
label = file_name
)
) +
geom_point() +
geom_line() +
facet_wrap(vars(well, depth), scales = "free_y") +
scale_color_manual(values = amendment_palette) +
#scale_x_continuous(breaks = c(0, 30, 60, 120, 180)) +
theme_bw() +
labs(
x = "Incubation time (days)",
y = latex2exp::TeX("nmol $CH_4$ $ml^{-1}$")
) +
theme(
strip.background = element_rect(fill = "#e3e3e3", color = NA),
panel.grid.minor = element_blank(),
panel.grid.major.y = element_blank(),
strip.background.x = element_rect(fill = "black"),
strip.text = element_text(color = "white"),
panel.border = element_rect(linewidth = 1.2, color = "black"),
axis.ticks.x = element_blank(),
#legend.position = "None"
)
#plotly::ggplotly()
gc_data_filtered |>
filter(gas == "CH4") |>
ggplot(
aes(x = dt,
y = peak_area,
color = amendment,
shape = amendment,
linetype = amendment,
label = file_name
)
) +
geom_point() +
geom_line() +
facet_wrap(vars(well, depth), scales = "free_y") +
scale_color_manual(values = amendment_palette) +
#scale_x_continuous(breaks = c(0, 30, 60, 120, 180)) +
theme_bw() +
theme(
strip.background = element_rect(fill = "#e3e3e3", color = NA),
panel.grid.minor = element_blank(),
panel.grid.major.y = element_blank(),
strip.background.x = element_rect(fill = "black"),
strip.text = element_text(color = "white"),
panel.border = element_rect(linewidth = 1.2, color = "black"),
axis.ticks.x = element_blank(),
#legend.position = "None"
)
t0 <- tibble(
well = c("BA3A", "BA4A", "BA1B")
) |>
crossing(
depth = c(20, 150, 270),
amendment = c("Bicarbonate", "Formate", "Acetate"),
gas = c("CH4", "CO2")
) |>
mutate(
depth = case_when(
depth == 270 & well == "BA1B" ~ 250,
TRUE ~ depth
)
) |>
mutate(
nmol_per_ml = 0,
start_date = dmy("07FEB23"),
sampling_date = dmy("07FEB23"),
dt = sampling_date - start_date,
peak_area = 0
)
gc_data <- gc_data |>
bind_rows(t0)
excluded_list <- excluded$excluded
gc_data_filtered <- gc_data |>
filter(!file_name %in% excluded_list)
gc_data_filtered |>
filter(gas == "CH4") |>
ggplot(
aes(x = dt,
y = peak_area,
color = amendment,
shape = amendment,
linetype = amendment,
label = file_name
)
) +
geom_point() +
geom_line() +
facet_wrap(vars(well, depth), scales = "free_y") +
scale_color_manual(values = amendment_palette) +
#scale_x_continuous(breaks = c(0, 30, 60, 120, 180)) +
theme_bw() +
theme(
strip.background = element_rect(fill = "#e3e3e3", color = NA),
panel.grid.minor = element_blank(),
panel.grid.major.y = element_blank(),
strip.background.x = element_rect(fill = "black"),
strip.text = element_text(color = "white"),
panel.border = element_rect(linewidth = 1.2, color = "black"),
axis.ticks.x = element_blank(),
#legend.position = "None"
)
gc_data_filtered |>
filter(gas == "CH4") |>
ggplot(
aes(x = dt,
y = peak_area,
color = amendment,
shape = amendment,
linetype = amendment,
label = file_name
)
) +
geom_point() +
geom_line() +
facet_wrap(vars(well, depth)) +
scale_color_manual(values = amendment_palette) +
#scale_x_continuous(breaks = c(0, 30, 60, 120, 180)) +
theme_bw() +
theme(
strip.background = element_rect(fill = "#e3e3e3", color = NA),
panel.grid.minor = element_blank(),
panel.grid.major.y = element_blank(),
strip.background.x = element_rect(fill = "black"),
strip.text = element_text(color = "white"),
panel.border = element_rect(linewidth = 1.2, color = "black"),
axis.ticks.x = element_blank(),
#legend.position = "None"
)
